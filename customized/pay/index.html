<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link href="./static/img/icon/favicon.ico" rel="SHORTCUT ICON">
    <style type="text/css">
        * {margin: auto;padding: 0;border: 0;}
        html {-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%}
        body {font-family: -apple-system, SF UI Text, Arial, Microsoft YaHei, Hiragino Sans GB, WenQuanYi Micro Hei, sans-serif;color: #333;}
        img {max-width: 100%;}
        h3 {padding: 10px;}
        .container {text-align: center;}
        .title {padding: 2em 0;background-color: #fff;}
        .content {padding: 2em 1em;color: #fff;}
        .wepay {background-color: #23ac38;}
        .qq {background-color: #4c97d5;}
        .other {background-color: #ff7055;}
    </style>
    <script>
        var staticImgPath = "./static/img/";
        var setting = {
            ua: navigator.userAgent,
            qqIcon: staticImgPath + "icon/qq.webp",
            wxIcon: staticImgPath + "icon/wx.webp",
            otherIcon: staticImgPath + "icon/other.webp",

            wxpayQr: staticImgPath + "qrcode/wxpay.webp",
            qqpayQr: staticImgPath + "qrcode/qqpay.webp",
            otherQr: staticImgPath + "qrcode/other.webp",
            alipayUrl: "HTTPS://QR.ALIPAY.COM/FKX09613RWE3ROTNTVR362",

            qqpayTitle: "QQ 钱包",
            wxpayTitle: "微信支付",
            alipayTitle: "支付宝",
            otherTitle: "打赏作者",
            payText: "长按识别二维码，向 TA 付款",
            otherText: "请使用支付宝、微信或 QQ 扫码付款"
        };
    </script>
</head>
<body hidden="hidden">
    <div class="container">
        <div class="title"><img id="titleIcon" width="48px" height="48px"><h1 id="titleText"></h1></div>
        <div class="content"><img id="qrImg"><h3 id="qrText"></h3></div>
    </div>
    <script>
        var ua = setting.ua;
        var type = "other";
        var name = setting.otherTitle;
        var titleIcon = setting.otherIcon;
        var qrImg = setting.otherQr;
        var qrText = setting.otherText;
        if(ua.match(/Alipay/i)) {
            type = "alipay";
            name = setting.alipayTitle;
            self.location = setting.alipayUrl;
        } else if(ua.match(/MicroMessenger\//i)) {
            type = "wepay";
            name = setting.wxpayTitle;
            titleIcon = setting.wxIcon;
            qrImg = setting.wxpayQr;
        } else if(ua.match(/QQ\//i)) {
            type = "qq";
            name = setting.qqpayTitle;
            titleIcon = setting.qqIcon;
            qrImg = setting.qqpayQr;
        }
        document.title = name;
        var icon = new Image();
        var qr = new Image();
        icon.onload = function(){
            document.getElementById("titleIcon").setAttribute("src", icon.src);
            document.getElementById("titleText").innerHTML = name;
            show();
        };
        icon.src = titleIcon;
        qr.onload = function(){
            document.getElementById("qrImg").setAttribute("src", qr.src);
            document.getElementById("qrText").innerHTML = qrText;
            show();
        };
        qr.src = qrImg;
        if(type != "other") qrText = setting.payText;
        var body = document.body;
        body.setAttribute("class", type);
        function show() {
            if(type != "alipay" && icon.complete && qr.complete) { 
                body.removeAttribute("hidden"); 
            }
        }
    </script>
</body>
</html>
